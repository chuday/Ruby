
=begin

üìå –ü–µ—Ä–≤—ã–π —ç—Ç–∞–ø: –ü—Ä–æ—Å—Ç–∞—è –∫–æ–Ω—Å–æ–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è

1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
2. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á
3. –û—Ç–º–µ—Ç–∫–∞ –∑–∞–¥–∞—á–∏ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π
4. –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏

=end


# –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –≤–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö
puts "–í–≤–µ–¥–∏—Ç–µ –í–∞—à–µ –∏–º—è: "
name_user = gets.chomp

# –ú–∞—Å—Å–∏–≤ –∑–∞–¥–∞—á
tasks_user_array = []

puts "–ü—Ä–∏–≤–µ—Ç, #{name_user}! –î–∞–≤–∞–π –Ω–∞—á–Ω–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∑–∞–¥–∞—á–∞–º–∏!"

# –ú–µ—Ç–æ–¥ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏
def add_task(tasks)
  print "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É: "
  new_task = gets.chomp
  tasks << new_task
  puts "–ó–∞–¥–∞—á–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞!"
end

# –ú–µ—Ç–æ–¥ –¥–ª—è –ø–æ–∫–∞–∑–∞ –≤—Å–µ—Ö –∑–∞–¥–∞—á
def show_task(tasks)
  if tasks.empty?
    puts "–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø—É—Å—Ç."
  else
    puts "–í–∞—à–∏ –∑–∞–¥–∞—á–∏:"
    tasks.each_with_index do |task, index|
      puts "#{index + 1}. #{task}"
    end
  end
end

# –ú–µ—Ç–æ–¥ –¥–ª—è –æ—Ç–º–µ—Ç–∫–∏ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π
def mark_task_done(tasks)
  if tasks.empty?
    puts "–ù–µ—Ç –∑–∞–¥–∞—á –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è."
    return
  end

  show_task(tasks)
  print "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏: "
  index = gets.chomp.to_i - 1

  if index >= 0 && index < tasks.length
    tasks[index] = "‚úÖ #{tasks[index]}"
    puts "–ó–∞–¥–∞—á–∞ –æ—Ç–º–µ—á–µ–Ω–∞ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è!"
  else
    puts "–ù–µ–≤–µ—Ä–Ω—ã–π –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏."
  end
end

# –ú–µ—Ç–æ–¥ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏
def delete_task(tasks)
  if tasks.empty?
    puts "–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø—É—Å—Ç ‚Äî –Ω–µ—á–µ–≥–æ —É–¥–∞–ª—è—Ç—å."
    return
  end

  show_task(tasks)
  print "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è: "
  index = gets.chomp.to_i - 1

  if index >= 0 && index < tasks.length
    removed = tasks.delete_at(index)
    puts "–ó–∞–¥–∞—á–∞ \"#{removed}\" —É–¥–∞–ª–µ–Ω–∞."
  else
    puts "–ù–µ–≤–µ—Ä–Ω—ã–π –Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏."
  end
end

# === –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –º–µ–Ω—é ===

loop do
  puts "\n–í—ã–±–µ—Ä–∏ –¥–µ–π—Å—Ç–≤–∏–µ:
  1 - –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
  2 - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
  3 - –û—Ç–º–µ—Ç–∏—Ç—å –∑–∞–¥–∞—á—É –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π
  4 - –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É
  0 - –í—ã–π—Ç–∏"

  print "–í–∞—à –≤—ã–±–æ—Ä: "
  choice = gets.chomp.to_i

  case choice
  when 1
    add_task(tasks_user_array)
  when 2
    show_task(tasks_user_array)
  when 3
    mark_task_done(tasks_user_array)
  when 4
    delete_task(tasks_user_array)
  when 0
    puts "–í—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã. –ü–æ–∫–∞, #{name_user}!"
    break
  else
    puts "–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä. –ü–æ–ø—Ä–æ–±—É–π —Å–Ω–æ–≤–∞!"
  end
end
